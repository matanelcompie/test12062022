<html>
  <head>
    <title>Demo</title>
    <link rel="stylesheet" href="style.css" />
	
<script src="js/sip-0.7.3.min.js"></script>



  </head>

  <body>
<video id="remoteVideo"></video>
<video id="localVideo" muted="muted"></video>
<button id="endCall">End Call</button>

<div id="ua-status">Status</div>



<script>


var config = {
    uri: '1000@dialer1.shass.co.il',
    ws_servers: 'wss://dialer1.shass.co.il:7443/ws',
    authorizationUser: '1000',
    password: 'l9dmzybq16hgyyrszjcb',
	traceSip: true,
registerExpires: 60
};



var ua = new SIP.UA(config);
  ua.register();
  var optionsa = {
    media: {
        constraints: {
            audio: true,
            video: false
        },
        render: {
            remote: document.getElementById('remoteVideo'),
            local: document.getElementById('localVideo')
        }
    }
};

session = ua.invite('sip:2222@dialer1.shass.co.il', optionsa);



var session;

var endButton = document.getElementById('endCall');
var Status = document.getElementById('ua-status');
endButton.innerHTML = 'Call';
endButton.addEventListener("click", function () {
session.bye();
session.cancel();
session.terminate();


    alert("Call Ended");
}, false);


Status.innerHTML = 'Connecting...';

  ua = new SIP.UA(config);

  ua.on('connected', function () {
    Status.innerHTML = 'Connected';
  });

  ua.on('registered', function () {
        Status.innerHTML = 'Register';
  });

  ua.on('unregistered', function () {
        Status.innerHTML = 'Unregistered';
  });

  ua.on('invite', function (session) {
    Status.innerHTML = 'Start Call';
  });
  
  session.on('accepted', function () {
     Status.innerHTML = 'Start Call';
    });
	
session.on('bye', function () {
      Status.innerHTML = 'End Call';
    });	

  </script>
    

  </body>
</html>